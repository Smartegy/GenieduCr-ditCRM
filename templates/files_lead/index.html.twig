
{% extends 'base.html.twig' %}
{% set page_title = 'Liste des Documents attaché' %}
{% set P_page_title = 'Liste des Leads' %}
{% set P_path = '/leads' %} 
{% block body %}


 
     <!--begin::Main-->
    <!--begin::Root-->
    <div class="d-flex flex-column flex-root">
        <!--begin::Page-->
        
        <div class="card mb-5 mb-xl-10">
            <div class="card-body pt-9 pb-0">
		
                <!--begin::Details-->
                <div class="d-flex flex-wrap flex-sm-nowrap mb-3">
                   
                     <!--begin::Info-->
                    <div class="flex-grow-1">
                        <!--begin::Title-->
                        <div class="d-flex justify-content-between align-items-start flex-wrap mb-2">
                            <!--begin::User-->
                            <div class="d-flex flex-column">
                                <!--begin::Name-->
                                <div class="d-flex align-items-center mb-2">
                                    <a href="#" class="text-gray-900 text-hover-primary fs-2 fw-bolder me-1" >{{lead.nom}}</a>
                   

                                </div>
                                <!--end::Name-->
                                <!--begin::Info-->
                                <div class="d-flex flex-wrap fw-bold fs-6 mb-4 pe-2">
                                    <a href="#" class="d-flex align-items-center text-gray-400 text-hover-primary me-5 mb-2">
                                        <!--begin::Svg Icon | path: icons/duotune/communication/com006.svg-->
                                        <span class="svg-icon svg-icon-4 me-1">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                <path opacity="0.3" d="M22 12C22 17.5 17.5 22 12 22C6.5 22 2 17.5 2 12C2 6.5 6.5 2 12 2C17.5 2 22 6.5 22 12ZM12 7C10.3 7 9 8.3 9 10C9 11.7 10.3 13 12 13C13.7 13 15 11.7 15 10C15 8.3 13.7 7 12 7Z" fill="black"></path>
                                                <path d="M12 22C14.6 22 17 21 18.7 19.4C17.9 16.9 15.2 15 12 15C8.8 15 6.09999 16.9 5.29999 19.4C6.99999 21 9.4 22 12 22Z" fill="black"></path>
                                            </svg>
                                        </span>
                                        <!--end::Svg Icon-->{{lead.Statusleads.nom}}</a>
                                   

                                </div>
                                <div class="d-flex flex-wrap fw-bold fs-6 mb-4 pe-2">

                                    <a href="#" class="d-flex align-items-center text-gray-400 text-hover-primary mb-2" id="uniqlead">
                                        <!--begin::Svg Icon | path: icons/duotune/communication/com011.svg-->
                                        <span class="svg-icon svg-icon-4 me-1">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                <path opacity="0.3" d="M21 19H3C2.4 19 2 18.6 2 18V6C2 5.4 2.4 5 3 5H21C21.6 5 22 5.4 22 6V18C22 18.6 21.6 19 21 19Z" fill="black"></path>
                                                <path d="M21 5H2.99999C2.69999 5 2.49999 5.10005 2.29999 5.30005L11.2 13.3C11.7 13.7 12.4 13.7 12.8 13.3L21.7 5.30005C21.5 5.10005 21.3 5 21 5Z" fill="black"></path>
                                            </svg>
                                        </span>
                                        <!--end::Svg Icon-->{{lead.courriel}}</a>
                                </div>
                                <!--end::Info-->
                            </div>
                            <!--end::User-->

                        </div>
                        <!--end::Title-->
                        <!--begin::Stats-->
          
                        <!--end::Stats-->
                    </div>
                    <!--end::Info-->
                </div>
                <!--end::Details--> 
                <!--begin::Navs-->
                <ul class="nav nav-stretch nav-line-tabs nav-line-tabs-2x border-transparent fs-5 fw-bolder">
                    <!--begin::Nav item-->
                    <li class="nav-item mt-2">
                        <a class="nav-link text-active-primary ms-0 me-10 py-5 active" href="{{path("leads_show",{ 'id' : lead.Id})}}">Aperçu</a>
                        
                    </li>
                    <!--end::Nav item-->
                    <!--begin::Nav item-->
                    <li class="nav-item mt-2">
                        <a class="nav-link text-active-primary ms-0 me-10 py-5" href="{{path("leads_edit",{ 'id' : lead.Id})}}">Modification</a>
                    </li>
                    <!--end::Nav item-->
                 
                    <!--begin::Nav item-->
                    <li class="nav-item mt-2">
                        <a class="nav-link text-active-primary ms-0 me-10 py-5" href="{{path('notes_index', {'idlead' : lead.id})}}">Notes</a>
                    </li>
                    <li class="nav-item mt-2">
                        <a class="nav-link text-active-primary ms-0 me-10 py-5" href="{{path('files_index', {'idlead' : lead.id})}}">Documents Attaché</a>
                    </li>

                      <li class="nav-item mt-2">
                        <a class="nav-link text-active-primary ms-0 me-10 py-5" href="{{path('courriel', {'idlead' : lead.id})}}">Courriel</a>
                    </li>
                    <li class="nav-item mt-2">
                        <a class="nav-link text-active-primary ms-0 me-10 py-5" href="{{path('sms', {'idlead' : lead.id})}}">Sms</a>
                    </li>
                    <!--end::Nav item-->

                </ul>
                <!--begin::Navs-->
            </div>
        </div>  
  					 
						<!--begin::Post-->
                        
		
						<div class="post d-flex flex-column-fluid" id="kt_post">
							<!--begin::Container-->
							<div id="kt_content_container" class="container-xxl">
								<!--begin::Card-->
								<div class="card">
									{% for message in app.flashes('success') %}
									<div class="alert alert-success">
										{{ message }}
									</div>
									 {% endfor %}
									<!--begin::Card header-->
									<h3 class="fw-bolder m-0">Liste des Documents</h3>
									<!--end::Card header-->
									<!--begin::Card body-->
									<div class="card-body py-4">
										<!--begin::Table-->
			
										<div class="card-body py-4 form-control form-control-sm form-control-solid ">
												<div class=" overflow-auto pb-5">
													<div class="d-flex align-items-center border border-dashed border-gray-0 rounded min-w-700px p-5">
																{# <div class="d-flex align-items-center border border-dashed border-gray-300 rounded min-w-700px p-5"> #}

												{% for file in files %}
											  
															<div class=" col-3 d-flex flex-aligns-center pe-10 pe-lg-20">
																<a href="#" class="text-gray-800 text-hover-primary d-flex flex-column">
																	<!--begin::Image-->
																	<div class="symbol symbol-60px mb-5">
																		
																			 <a download href="{{asset('/media/files/' ~ file.nom  )}}" >
																			 <img alt="" class="w-30px me-3" src="/media/svg/files/pdf.svg">
																			   {# <i class="fa fa-download"></i> #}
																			   </a>
				
																	</div>
																	<!--end::Image-->
																	<!--begin::Title-->
																	{# <div class="fs-5 fw-bolder mb-2">{{file.titre}}.</div> #}
																	<!--end::Title-->
																</a>
																	
																		<!--end::Icon-->
																		<!--begin::Info-->
																		<div class="ms-1 fw-bold">
																	 
																			
																			<a download href="{{asset('/media/files/' ~ file.nom  )}}" class="fs-6 text-hover-primary fw-bolder"> {{file.titre}} </a>
																		 
																			<div class="text-gray-400">
																			 <a download href="{{asset('/media/files/' ~ file.nom  )}}" >
																			 
																			   {# <i class="fa fa-download"></i> #}
																			  	 {# <img alt="" class="w-30px me-3" src="/media/svg/files/download.gif"> #}
																			   <!--begin::Svg Icon | path: assets/media/icons/duotune/files/fil021.svg-->
																			   
                                                                              <span class="svg-icon svg-icon-3">
																			  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                                              <path opacity="0.5" d="M19 15C20.7 15 22 13.7 22 12C22 10.3 20.7 9 19 9C18.9 9 18.9 9 18.8 9C18.9 8.7 19 8.3 19 8C19 6.3 17.7 5 16 5C15.4 5 14.8 5.2 14.3 5.5C13.4 4 11.8 3 10 3C7.2 3 5 5.2 5 8C5 8.3 5 8.7 5.1 9H5C3.3 9 2 10.3 2 12C2 13.7 3.3 15 5 15H19Z" fill="black"/>
                                                                              <path d="M13 17.4V12C13 11.4 12.6 11 12 11C11.4 11 11 11.4 11 12V17.4H13Z" fill="black"/>
                                                                              <path opacity="0.5" d="M8 17.4H16L12.7 20.7C12.3 21.1 11.7 21.1 11.3 20.7L8 17.4Z" fill="black"/>
                                                                              </svg></span>
                                                                              <!--end::Svg Icon-->
																			   
																			   
																			   </a>
														                       <form  method="POST" style="display:inline-block"  id="myform" action="{{path('files_lead_delete', {'id' : file.id , 'idlead' :question_id}) }}" onsubmit="returne">
																                   <input type="hidden" name="_method" value="delete">
																                    <input type="hidden" name="_token" value="{{csrf_token('SUP' ~ file.id)}}">
														                            <a href="{{path('files_lead_delete', {'id' : file.id , 'idlead' :question_id}) }}" class="confirmModalLink btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1">	
																					<span class="svg-icon svg-icon-3">
															                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
															                 	         <path d="M5 9C5 8.44772 5.44772 8 6 8H18C18.5523 8 19 8.44772 19 9V18C19 19.6569 17.6569 21 16 21H8C6.34315 21 5 19.6569 5 18V9Z" fill="black" />
															                	        <path opacity="0.5" d="M5 5C5 4.44772 5.44772 4 6 4H18C18.5523 4 19 4.44772 19 5V5C19 5.55228 18.5523 6 18 6H6C5.44772 6 5 5.55228 5 5V5Z" fill="black" />
															                	        <path opacity="0.5" d="M9 4C9 3.44772 9.44772 3 10 3H14C14.5523 3 15 3.44772 15 4V4H9V4Z" fill="black" />
															                             </svg>
														                                 </span>
														                            </a>
										                                     	</form>
																				
																				 <div class="modal fade" tabindex="-1" id="kt_modal_1">
																					<div class="modal-dialog">
																						<div class="modal-content">
																							<div class="modal-header">
																								<h5 class="modal-title">Confirmation de suppresion</h5>
																				
																								
																								<!--begin::Close-->
																								<div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
																									<span class="svg-icon svg-icon-2x"></span>
																								</div>
																								<!--end::Close-->
																							</div>
																				
																							<div class="modal-body">
																								<p>Voulez-vous vraiment supprimer ce fichier ?</p>
																							</div>
																				
																							<div class="modal-footer">
																								<button type="button" class="btn btn-light" data-bs-dismiss="modal" id="confirmModalNo">Annuler</button>
																								<button type="submit"  class="btn btn-primary" id="confirmModalYes">Supprimer</button>
																							
																						</div>
																					</div>
																					</div>
																				</div>
																			</div>
																		 
																		</div>
																		<!--begin::Info-->
															</div>
																	<!--end::Item-->
												{% endfor %}
													{# </div> #}
																	<!--end::Item-->
													</div> 	</div>
											</div>
								
											
										{# <div class="card-body py-4 form-control form-control-sm form-control-solid ">
											
												{% for file in files %}
											 
												<div class="row g-6 g-xl-9 mb-6 mb-xl-6   " >
													<!--begin::Col-->
													<div class="col-md-6 col-lg-4 col-xl-3 col-4">
											  
													
														 <div class="card h-60  ">
															<!--begin::Card body-->
															<div class="card-body d-flex justify-content-center text-center flex-column p-8  ">
																
																<!--begin::Name-->
																<a href="#" class="text-gray-800 text-hover-primary d-flex flex-column">
																	<!--begin::Image-->
																	<div class="symbol symbol-60px mb-5">
																		
																			 <a download href="{{asset('/media/files/' ~ file.nom  )}}" ><img src="{{asset('/media/svg/files/pdf.svg')}}" />  <i class="fa fa-download"></i></a>
				
																	</div>
																	<!--end::Image-->
																	<!--begin::Title-->
																	<div class="fs-5 fw-bolder mb-2">{{file.titre}}.</div>
																	<!--end::Title-->
																</a>
																<!--end::Name-->
																<!--begin::Description-->
															
																<!--end::Description-->
															</div>
															<form  method="POST" style="display:inline-block"  id="myform" action="{{path('files_lead_delete', {'id' : file.id , 'idlead' :question_id}) }}" onsubmit="returne">

																<input type="hidden" name="_method" value="delete">
																<input type="hidden" name="_token" value="{{csrf_token('SUP' ~ file.id)}}">
														         <a href="{{path('files_lead_delete', {'id' : file.id , 'idlead' :question_id}) }}" class="confirmModalLink btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1">
																<span class="svg-icon svg-icon-3">
															      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
															    	<path d="M5 9C5 8.44772 5.44772 8 6 8H18C18.5523 8 19 8.44772 19 9V18C19 19.6569 17.6569 21 16 21H8C6.34315 21 5 19.6569 5 18V9Z" fill="black" />
																    <path opacity="0.5" d="M5 5C5 4.44772 5.44772 4 6 4H18C18.5523 4 19 4.44772 19 5V5C19 5.55228 18.5523 6 18 6H6C5.44772 6 5 5.55228 5 5V5Z" fill="black" />
																    <path opacity="0.5" d="M9 4C9 3.44772 9.44772 3 10 3H14C14.5523 3 15 3.44772 15 4V4H9V4Z" fill="black" />
															      </svg>
														       </span>
														        </a>
											                </form>
													 
														</div>
												
													</div>
											 
											    </div>				
																        
                                
												{% endfor %}
											
										</div> #}
										<!--end::Table-->

                                        <br/> <br/>
                                        <div class="card-title m-0">

                                            <h3 class="fw-bolder m-0">Ajouter un document</h3>
										</div>
											<div >		
                                           {% if form is defined  %}
                                       
                                        {{ form_start(form, {'attr': {'idlead': 'question_id'}}) }}
                                        

                                        <div class="row mb-6">
							
                                            {{ form_label(form.nom, "Télécharger :", {'label_attr': {'class':"col-lg-4 col-form-label  fw-bold fs-6"}}) }}
                                            
                                            <div class="col-lg-8 fv-row fv-plugins-icon-container">
                                                {{ form_widget(form.nom, {'attr': {'class': 'form-control form-control-lg form-control-solid'}}) }}
                                                {{ form_errors(form.nom) }}
                
                                        </div>
                                        </div>
                                        <div class="row mb-6">
							
                                            {{ form_label(form.titre, "Titre :", {'label_attr': {'class':"col-lg-4 col-form-label  fw-bold fs-6"}}) }}
                                            
                                            <div class="col-lg-8 fv-row fv-plugins-icon-container">
                                                {{ form_widget(form.titre, {'attr': {'class': 'form-control form-control-lg form-control-solid'}}) }}
                                                {{ form_errors(form.titre) }}
                
                                        </div>
                                        </div>
                                        <div style="display:none;">{{ form_row(form.lien)}}</div>
                                         
                                   <div style="display:none;">{{ form_row(form.lead)}}</div>
       
                                        
			   
			<div class="card-footer d-flex justify-content-end py-6 px-9">
				<button type="reset" class="btn btn-light btn-active-light-primary me-2">Annuler</button>
                
               


			    <button type="submit" class="btn btn-primary" id="kt_account_profile_details_submit" >
				Ajouter
				</button>
			</div>
			
					{# Fermeture de la balise <form> du formulaire HTML #}
					{{ form_end(form) }}
                                        </div>
									</div>	
                    {% endif %}


									</div>
									<!--end::Card body-->
							 </di>
 				 
				</div>
				</div>
				</div>
				</div>
 
 	 


 	{{ include('layout/pagination.html.twig') }}
						<script>
							$("#kt_datatable_example_5").DataTable({
 "language": {
        "lengthMenu": "Afficher _MENU_",
        "sSearch":        "Rechercher:",
     
        
        "sLengthMenu":    "Mostrar _MENU_ registros",
        "sZeroRecords":   "No se encontraron resultados",
        "sEmptyTable":    "Pas de données pour cette liste",
        
         "sInfo":          "Affichage de _START_ à _END_ sur un total de _TOTAL_ enregistrements",
         "oPaginate": {
           
            "sNext":    "Suivant",
            "sPrevious": "Précédent"
        }     
     
 },
 "dom":
  "<'row'" +
  "<'col-sm-6 d-flex align-items-center justify-conten-start'l>" +
  "<'col-sm-6 d-flex align-items-center justify-content-end'f>" +
  ">" +

  "<'table-responsive'tr>" +

  "<'row'" +
  "<'col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start'i>" +
  "<'col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end'p>" +
  ">"
});
</script>

<script type="text/javascript">

		$(document).ready(function(){

			var theHREF;
			$(".confirmModalLink").click(function(e) {
					e.preventDefault();
					theHREF = $(this).attr("href");
					console.log(theHREF);
					$("#kt_modal_1").modal("show");
				});

				$("#confirmModalNo").click(function(e) {
					$("#kt_modal_1").modal("hide");
				});

				$("#confirmModalYes").click(function(e) {
				//	window.location.href = theHREF;
					$('#myform'). attr('action', theHREF);

					document.getElementById("myform").submit();
				});

		});

</script> 
  
  
{% endblock %} 

